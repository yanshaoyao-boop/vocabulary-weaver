<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
  <defs>
    <!-- Leather Texture Gradient -->
    <radialGradient id="leatherGrad" cx="30%" cy="30%" r="90%">
      <stop offset="0%" stop-color="#8B5A2B"/>
      <stop offset="40%" stop-color="#654321"/>
      <stop offset="80%" stop-color="#3E2723"/>
      <stop offset="100%" stop-color="#1A0F0A"/>
    </radialGradient>
    
    <!-- Deep Shadow for Folds -->
    <filter id="insetShadow">
      <feOffset dx="0" dy="2"/>
      <feGaussianBlur stdDeviation="2" result="offset-blur"/>
      <feComposite operator="out" in="SourceGraphic" in2="offset-blur" result="inverse"/>
      <feFlood flood-color="black" flood-opacity="0.8" result="color"/>
      <feComposite operator="in" in="color" in2="inverse" result="shadow"/>
      <feComposite operator="over" in="shadow" in2="SourceGraphic"/>
    </filter>

    <!-- Magical Glow -->
    <filter id="goldenGlow" x="-50%" y="-50%" width="200%" height="200%">
      <feGaussianBlur stdDeviation="4" result="coloredBlur"/>
      <feMerge>
        <feMergeNode in="coloredBlur"/>
        <feMergeNode in="SourceGraphic"/>
      </feMerge>
    </filter>
  </defs>

  <!-- Background Circle (Gryffindor Red) -->
  <circle cx="256" cy="256" r="240" fill="#740001" stroke="#eeba30" stroke-width="6"/>
  <circle cx="256" cy="256" r="230" fill="none" stroke="#ae0001" stroke-width="4" stroke-opacity="0.5"/>

  <!-- Sorting Hat Silhouette Group -->
  <g transform="translate(0, 20)">
    
    <!-- Brim (Shadow) -->
    <ellipse cx="256" cy="385" rx="160" ry="45" fill="#2d1810" opacity="0.6"/>
    
    <!-- Main Hat Body -->
    <path d="M 120 380 
             C 100 380, 80 370, 90 350
             L 120 320
             C 140 300, 160 305, 180 310
             L 210 260
             C 200 220, 190 180, 240 140
             C 260 120, 280 100, 360 80
             C 390 70, 420 80, 410 110
             C 400 140, 360 170, 340 210
             L 330 250
             C 350 260, 380 270, 390 300
             L 410 330
             C 430 350, 420 380, 390 390
             Z" 
          fill="url(#leatherGrad)"/>

    <!-- The "Face" Folds (Eyes and Mouth) -->
    <path d="M 190 280 Q 230 300, 280 270" fill="none" stroke="#2d1810" stroke-width="8" stroke-linecap="round" filter="url(#insetShadow)"/>
    <path d="M 280 270 Q 330 250, 360 280" fill="none" stroke="#2d1810" stroke-width="8" stroke-linecap="round" filter="url(#insetShadow)"/>
    
    <!-- Mouth Fold -->
    <path d="M 160 340 Q 260 380, 380 330" fill="none" stroke="#1A0F0A" stroke-width="12" stroke-linecap="round" filter="url(#insetShadow)"/>
    
    <!-- Patches -->
    <path d="M 200 200 L 230 190 L 240 220 L 210 230 Z" fill="#5D4037" stroke="#3E2723" stroke-width="2"/>
    <path d="M 205 200 L 208 205 M 225 195 L 228 200 M 235 220 L 232 215" stroke="#8B5A2B" stroke-width="1"/>

    <!-- Hat Brim (Front) -->
    <path d="M 90 370 Q 256 430, 420 370 C 430 380, 420 400, 256 420 Q 100 400, 90 370" fill="#5D4037"/>

  </g>

  <!-- Magical Sparkles (Gold) -->
  <g fill="#ffd700" filter="url(#goldenGlow)">
    <circle cx="100" cy="150" r="3" opacity="0.8"><animate attributeName="opacity" values="0.8;0.2;0.8" dur="3s" repeatCount="indefinite"/></circle>
    <circle cx="420" cy="180" r="4" opacity="0.9"><animate attributeName="opacity" values="0.9;0.3;0.9" dur="4s" repeatCount="indefinite"/></circle>
    <circle cx="80" cy="300" r="2" opacity="0.6"/>
    <circle cx="450" cy="280" r="3" opacity="0.7"/>
    <path d="M 380 120 L 383 128 L 391 131 L 383 134 L 380 142 L 377 134 L 369 131 L 377 128 Z" fill="#fffbe6"/>
    <path d="M 140 420 L 142 426 L 148 428 L 142 430 L 140 436 L 138 430 L 132 428 L 138 426 Z" fill="#fffbe6" transform="scale(0.8)"/>
  </g>

</svg>
